server:
  port: 6003

spring:
  application:
    name: gateway-service

zuul:
  host:
    socket-timeout-millis: 100000
  sensitiveHeaders: Cookie,Set-Cookie
  include-debug-header: true
  routes:
    article:
      path: /article/**
      service-id: article-service
      sensitiveHeaders:
      stripPrefix: false
    oauth:
      path: /auth/**
      service-id: auth-service
      sensitiveHeaders:
      stripPrefix: false
    web:
      path: /**
      serviceId: front
      stripPrefix: false
      sensitiveHeaders:

front:
  ribbon:
    NIWSServerListClassName: com.netflix.loadbalancer.ConfigurationBasedServerList
    listOfServers: ${ENV_WEB_URLS:http://localhost:10000}
    ConnectTimeout: 2000
    ReadTimeout: 60000
    MaxTotalHttpConnections: 500
    MaxConnectionsPerHost: 100

---
spring:
  profiles: dev, prod
  cloud:
    config:
      discovery:
        service-id: config-service
        enabled: true
      fail-fast: true
      retry:
        initial-interval: 5000
        max-attempts: 15
        multiplier: 1.5
        max-interval: 10000

eureka:
  instance:
    preferIpAddress: true
    ip-address: ${ENV_DOCKER_HOST_IP}
    nonSecurePort: ${ENV_DOCKER_HOST_PORT}
    instance-id: ${ENV_DOCKER_HOST_IP}:${spring.application.name}:${ENV_DOCKER_HOST_PORT}
    hostname: ${ENV_DOCKER_HOST_IP}
  client:
    register-with-eureka: true
    fetch-registry: true
    serviceUrl:
      defaultZone: ${ENV_EUREKA_DEFAULT_ZONE}
    enabled: true
